!function(t){t(document).ready(function(){void 0!==window.VcRowView&&(vc.shortcodes,window.TS_VCSC_VcRowViewCustom=window.VcRowView.extend({buildDesignHelpers:function(){var e=this.model.get("params"),o=this.model.getParam("css"),a=e.ts_row_bg_effects,n=this.$el.find("> .controls .column_toggle"),i=this.$el.find("> .controls .column_edit");if(""!=n.length)var r=n;else var r=i;var s,d,p=o.match(/background\-image:\s*url\(([^\)]+)\)/);p&&!_.isUndefined(p[1])&&(s=p[1]);var p=o.match(/background\-color:\s*([^\s\;]+)\b/);p&&!_.isUndefined(p[1])&&(d=p[1]);var p=o.match(/background:\s*([^\s]+)\b\s*url\(([^\)]+)\)/);if(p&&!_.isUndefined(p[1])&&(d=p[1],s=p[2]),this.$el.find("> .controls .vc_row_color").remove(),this.$el.find("> .controls .vc_row_image").remove(),this.$el.find("> .controls .ts-vcsc-background-color").remove(),this.$el.find("> .controls .ts-vcsc-background-image").remove(),this.$el.find("> .controls .ts-vcsc-background-gradient").remove(),d?t('<span class="vc_row_color" style="background-color: '+d+'" title="'+i18nLocale.row_background_color+'"></span>').insertAfter(r):_.isEmpty(e.bg_color)||t('<span class="vc_row_color" style="background-color: '+e.bg_color+'" title="'+i18nLocale.row_background_color+'"></span>').insertAfter(r),"single"==a&&(_.isEmpty(e.single_color)||t('<span class="ts-vcsc-background-color" style="background-color: '+e.single_color+'" title="'+i18nLocale.row_background_color+'"></span>').insertAfter(r)),"gradient"==a&&!_.isEmpty(e.gradient_color_start)&&!_.isEmpty(e.gradient_color_end)){var l="";l+="background: "+e.gradient_color_start+";",l+="background: -moz-linear-gradient("+e.gradient_angle+"deg, "+e.gradient_color_start+" "+e.gradient_start_offset+"%, "+e.gradient_color_end+" "+e.gradient_end_offset+"%);",l+="background: -webkit-linear-gradient("+e.gradient_angle+"deg, "+e.gradient_color_start+" "+e.gradient_start_offset+"%, "+e.gradient_color_end+" "+e.gradient_end_offset+"%);",l+="background: -o-linear-gradient("+e.gradient_angle+"deg, "+e.gradient_color_start+" "+e.gradient_start_offset+"%, "+e.gradient_color_end+" "+e.gradient_end_offset+"%);",l+="background: -ms-linear-gradient("+e.gradient_angle+"deg, "+e.gradient_color_start+" "+e.gradient_start_offset+"%, "+e.gradient_color_end+" "+e.gradient_end_offset+"%);",l+="background: linear-gradient("+(parseInt(e.gradient_angle)+90)+"deg, "+e.gradient_color_start+" "+e.gradient_start_offset+"%, "+e.gradient_color_end+" "+e.gradient_end_offset+"%);",t('<span class="ts-vcsc-background-gradient" style="'+l+'" title="'+i18nLocale.row_background_color+'"></span>').insertAfter(r)}s?t('<span class="vc_row_image" style="background-image: url('+s+');" title="'+i18nLocale.row_background_image+'"></span>').insertAfter(r):_.isEmpty(e.bg_image)||(s=t('<span class="vc_row_image" style="background-image: url('+t(".vc_loading_block > img").attr("src")+');" title="'+i18nLocale.row_background_image+'"></span>'),s.insertAfter(r),t.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_single_image_src",content:e.bg_image,size:"thumbnail"},dataType:"html"}).done(function(t){s.css({backgroundImage:"url("+t+")"})})),("image"==a||"fixed"==a||"parallax"==a||"automove"==a)&&(_.isEmpty(e.ts_row_bg_image)||(s=t('<span class="ts-vcsc-background-image" style="background-image: url('+t(".vc_loading_block > img").attr("src")+');"'+'title="'+i18nLocale.row_background_image+'"></span>'),s.insertAfter(r),t.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_single_image_src",content:e.ts_row_bg_image,size:"thumbnail"},dataType:"html"}).done(function(t){s.css({backgroundImage:"url("+t+")"})})))}}))})}(jQuery);